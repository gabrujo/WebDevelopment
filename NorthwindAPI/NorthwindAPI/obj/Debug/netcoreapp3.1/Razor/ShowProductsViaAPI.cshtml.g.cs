#pragma checksum "C:\Users\gabru\OneDrive\Área de Trabalho\Coding\WebDevelopment\NorthwindAPI\NorthwindAPI\ShowProductsViaAPI.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "090c87591c06e948e3c105b1a564e81db9e4eab1"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.ShowProductsViaAPI), @"mvc.1.0.razor-page", @"/ShowProductsViaAPI.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"090c87591c06e948e3c105b1a564e81db9e4eab1", @"/ShowProductsViaAPI.cshtml")]
    public class ShowProductsViaAPI : global::Microsoft.AspNetCore.Mvc.RazorPages.Page
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 3 "C:\Users\gabru\OneDrive\Área de Trabalho\Coding\WebDevelopment\NorthwindAPI\NorthwindAPI\ShowProductsViaAPI.cshtml"
  
    ViewData["Title"] = "ShowProductsViaApi";

#line default
#line hidden
#nullable disable
            WriteLiteral(@"<h1>Show Products Via Api</h1>
<div id=""pdetail"" class=""pinfo""></div>
<form id=""form1"">
    <div>
        <table style=""width:90%"">
            <tr>
                <td>Products from Northwind Database</td>
            </tr>
            <tr>
                <td><div id=""dstatus""></div></td>
            </tr>
            <tr>
                <td>
                    <table id=""tproducts"" align=""center""
                           style=""border:1px solid green""></table>
                </td>
            </tr>
        </table>
    </div>
</form>
");
            DefineSection("Scripts", async() => {
                WriteLiteral(@"
    <script>
        $(function () {
            loadProductData();
            $(document).keydown(function (ev) {
                var keycode = ev.which || ev.keyCode;
                //alert(keycode); // 27 for escape key
                if (keycode == 27)
                    $(""#pdetail"").hide();
            });
        });
        function loadProductData() {
            $.ajax({
                type: ""GET"",
                url: ""api/nwproducts"",
                contentType: ""application/json"",
                dataType: ""json"",
                data: ""{'prodid': 1}"",
                success: function (res) { getProductsSucceeded(res) },
                error: function (res) { getProductsFailed(res) },
                timeout: 5000
            });
        }
        function getProductsSucceeded(res) {
            // res is the array of json objects, we need to loop through it
            // and generate the html table
            var out1 = """";
            var toprow = ""<tr>"";
");
                WriteLiteral(@"            var count = 0;
            $.each(res[0], function (key, val) {
                if (key.toUpperCase() != ""PRODUCTID"")
                    toprow += ""<th>"" + key + ""</th>"";
            });
            toprow += ""</tr>"";
            $(""#tproducts"").append(toprow);
            // now obtain all the values for the data
            $.each(res, function (key, val) {
                var row = ""<tr>"";
                var count = 0;
                $.each(val, function (key, value) {
                    if (key.toUpperCase() == ""PRODUCTID"")
                        row = row.substring(0, 3) + "" data-pid='"" + value + ""'>"" +
                            row.substring(4);
                    else
                        row += ""<td>"" + value + ""</td>"";
                });
                row += ""</tr>"";
                $(""#tproducts"").append(row);
            });
            $(""table#tproducts tr:even"").addClass(""even"");
            $(""table#tproducts tr:odd"").addClass(""odd"");
           ");
                WriteLiteral(@" $(""table#tproducts th"").addClass(""tableHeading"");
            $(""table#tproducts tr"").hover(function () {
                $(this).addClass(""highlight"")
            },
                function () {
                    $(this).removeClass(""highlight"");
                });
            //------------get product detail if some one clicks on a row------
            $(""table#tproducts td"").click(function (e) {
                var pid = $(this).closest('tr').attr(""data-pid"");
                var xpos = e.pageX;
                var ypos = e.pageY;
                // make an ajax call to the getproductdetail function in the service
                $.ajax({
                    type: ""GET"",
                    url: ""api/nwproducts/"" + pid,
                    data: ""{'prodid':"" + pid + ""}"",
                    contentType: ""application/json"",
                    dataType: ""json"",
                    success: function (res) {
                        getProductDetailSucceeded(res, xpos, ypos)
        ");
                WriteLiteral(@"            },
                    error: function (res) {
                        productDetailFailure(res);
                    }
                });
            });
        }
        function getProductDetailSucceeded(res, xpos, ypos) {
            $(""#pdetail"").html(""StockLevel:"" + res.unitsInStock + "" QPU "" +
                res.quantityPerUnit + "" Discont.?"" + res.discontinued);
            $(""#pdetail"").css({ 'top': ypos + 5, 'left': xpos, 'display': 'block' });
        }
        function productDetailFailure(res) {
            alert(res.statusText);
        }
        function getProductsFailed(res) {
            alert(res.statusText);
        }
    </script>
");
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<NorthwindAPI.ShowProductsViaAPIModel> Html { get; private set; }
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<NorthwindAPI.ShowProductsViaAPIModel> ViewData => (global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<NorthwindAPI.ShowProductsViaAPIModel>)PageContext?.ViewData;
        public NorthwindAPI.ShowProductsViaAPIModel Model => ViewData.Model;
    }
}
#pragma warning restore 1591
